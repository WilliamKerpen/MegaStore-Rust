<!-- templates/produto.html -->
<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>{{ produto.nome }} - Megastore</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
   <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body class="d-flex flex-column min-vh-100">

    <!-- Header -->
  <header class="d-flex justify-content-between align-items-center p-3" style="background-color: #2b2b2b;">
    <div class="logo">
      <a href="{{ url_for('index') }}" class="text-white text-decoration-none fs-4 fw-bold">megastore</a>
    </div>
    <div>
      <button class="icon-btn text-white me-3"><i class="bi bi-cart"></i> Carrinho</button>
      <button class="icon-btn text-white"><i class="bi bi-person"></i> Perfil</button>
    </div>
  </header>


  <div class="container py-5">
    <a href="{{ url_for('index') }}" class="btn btn-secondary mb-4">← Voltar</a>

    <div class="row">

      <div class="col-md-6">
        {% if imagem %}
          <img src="{{ url_for('static', filename='uploads/' ~ imagem.filename) }}" alt="{{ produto.nome }}" class="img-fluid rounded">
        {% else %}
          <img src="{{ url_for('static', filename='images/default.png') }}" alt="Sem imagem" class="img-fluid rounded">
        {% endif %}
      </div>
      <div class="col-md-6">
        <h2>{{ produto.nome }}</h2>
        <p class="text-muted">{{ produto.categoria }}</p>
        <p>{{ produto.descricao }}</p>
        <h4 class="text-success">R$ {{ produto.preco }}</h4>
        <p>Quantidade disponível: {{ produto.quantidade }}</p>

        <div class="mt-4 d-flex gap-3">
          <button class="btn btn-success btn-lg">
            <i class="bi bi-lightning-fill"></i> Comprar Agora
          </button>
          <button class="btn btn-outline-dark btn-lg">
            <i class="bi bi-cart-plus"></i> Adicionar ao Carrinho
          </button>
        </div>
      </div>
    </div>
  </div>

    <!-- Produtos Recomendados -->
  <section class="container">
    <h4 class="mb-3">Produtos Recomendados</h4>
    <div class="row">
      {% for produto in produtos_recomendados %}
      <div class="col-md-3">
        <a href="{{ url_for('produto_details', id=produto.id) }}" class="text-decoration-none text-dark">
          <div class="product-card text-center">
            {% set imagem = produto.imagens.filter_by(is_primary=True).first() %}
            {% if imagem %}
              <img src="{{ url_for('static', filename='uploads/' ~ imagem.filename) }}" alt="{{ produto.nome }}" class="img-fluid mb-2">
            {% else %}
              <img src="{{ url_for('static', filename='images/default.png') }}" alt="Sem imagem" class="img-fluid mb-2">
            {% endif %}
            <h6>{{ produto.nome }}</h6>
            <p class="text-muted">{{ produto.categoria }}</p>
            <p class="fw-bold">R$ {{ produto.preco }}</p>
          </div>
        </a>
      </div>
      {% endfor %}
    </div>
  </section>

  <!-- Últimas Pesquisas -->
  <section class="container my-5">
    <h4 class="mb-3">Últimas Pesquisas</h4>
    <div class="row" id="ultimas-pesquisas">
      <!-- JS vai preencher aqui -->
    </div>
  </section>

  <!-- Footer -->
  <footer class="text-center p-4 mt-auto" style="background-color: #2b2b2b; color: white;">
    <p class="mb-0">&copy; 2025 Megastore. Todos os direitos reservados.</p>
  </footer>

  <!-- Scripts -->
  <script src="{{ url_for('static', filename='scripts/scripts.js') }}"></script>

</body>